create or replace NONEDITIONABLE PROCEDURE crearSubasta(nombreItem IN VARCHAR2, detallesItem IN VARCHAR2, imagen IN VARCHAR2, subcat IN VARCHAR2, montoIni IN DECIMAL, fechaFinal IN TIMESTAMP, detalles IN VARCHAR, retorno OUT INTEGER)
IS

    subcatId INTEGER;
    iteId INTEGER;

BEGIN


    SELECT ID INTO subcatId FROM subcategoria WHERE nombre = subcat;

    INSERT INTO ITEM(descripcion,
    nombre,
    subcategoriaid,
    imagen)
    VALUES(
    detallesItem,
    nombreItem,
    subcatId,
    imagen);

    SELECT ID INTO iteId FROM item WHERE nombre = nombreItem;

    INSERT INTO SUBASTA(
    precioInicial,
    detallesEntrega,
    fechaInicio,
    fechaFinal,
    itemId)
    VALUES (
    montoIni,
    detalles,
    SYSDATE,
    fechaFinal,
    iteId);

    retorno:= 0;

END;